import"../chunks/Bzak7iHL.js";import{o as V}from"../chunks/BV_wULoO.js";import{t as I,h as x,a as O,P as Y,Q as Z,R as S,T as B,U as J,V as q,W as Q,X as A,c as L,Y as X,Z as w,_ as z,b as G,$ as ee,d as C,M as ae,i as se,k as te,O as le,m as y,o as d,a0 as re,J as ne,a1 as ie,n as k,l as D}from"../chunks/BwdVtbq4.js";import{c as i,a,b as s,d as H,e as v,g as N,H as oe,p as ue,t as ve,s as ce,f as fe}from"../chunks/DoYfpg93.js";import{b as R}from"../chunks/hsEIx00m.js";import{g as pe}from"../chunks/DauYJIVW.js";function T(b,_,t=!1,o=!1,r=!1){var l=b,m="";I(()=>{var h=Y;if(m===(m=_()??"")){x&&O();return}if(h.nodes!==null&&(Z(h.nodes.start,h.nodes.end),h.nodes=null),m!==""){if(x){S.data;for(var u=O(),g=u;u!==null&&(u.nodeType!==B||u.data!=="");)g=u,u=J(u);if(u===null)throw q(),Q;A(S,g),l=L(u);return}var c=m+"";t?c=`<svg>${c}</svg>`:o&&(c=`<math>${c}</math>`);var f=X(c);if((t||o)&&(f=w(f)),A(w(f),f.lastChild),t||o)for(;w(f);)l.before(w(f));else l.before(f)}})}function de(b,_){let t=null,o=x;var r;if(x){t=S;for(var l=w(document.head);l!==null&&(l.nodeType!==B||l.data!==b);)l=J(l);if(l===null)C(!1);else{var m=J(l);l.remove(),L(m)}}x||(r=document.head.appendChild(z()));try{G(()=>_(r),ee)}finally{o&&(C(!0),L(t))}}var me=se('<div class="input"><div id="outputHistory"><pre class="break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base"><!></pre></div> <span id="prompt"><!></span> <span><!></span></div>');function we(b,_){ae(_,!0);let t,o;const r=re(fe);V(()=>{const e=localStorage.getItem("MESh_commandHistory");if(e)try{i.value=JSON.parse(e)}catch(n){console.error(n),i.value=[]}else i.value=[];window.addEventListener("keydown",l)});function l(e){e.preventDefault(),m();const n=a.value.trim(),p=n.split(" ");if(e.key=="c"&&e.ctrlKey){t.innerHTML+=`<pre class="break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base"> &gt&gt ${h("exit")}</pre>`,a.value="",s.value=0;return}switch(e.key){case"Backspace":s.value>0&&(a.value=a.value.slice(0,s.value-1)+a.value.slice(s.value),s.value--);break;case"Delete":s.value<a.value.length&&(a.value=a.value.slice(0,s.value)+a.value.slice(s.value+1));break;case"Enter":const K=N();t.innerHTML+=`<pre class="${d(r).text.secondary} break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base">${K} ${n}</pre>`,n&&(i.value.push(n),i.value.length>oe&&i.value.shift(),localStorage.setItem("MESh_commandHistory",JSON.stringify(i.value))),v.value=-1;const P=h(p[0],p.slice(1));p[0]!="clear"&&p[0]!=""&&p[0]!="cd"&&(t.innerHTML+=`<pre class="break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base"> &gt&gt ${P}</pre>`),a.value="",s.value=0;break;case"ArrowLeft":s.value>0&&s.value--;break;case"ArrowRight":s.value<a.value.length&&s.value++;break;case"ArrowUp":i.value.length>0&&(v.value==-1?v.value=i.value.length-1:v.value>0&&v.value--,a.value=i.value[v.value],s.value=a.value.length);break;case"ArrowDown":i.value.length>0&&v.value!==-1&&(v.value<i.value.length-1?(v.value++,a.value=i.value[v.value]):(v.value=-1,a.value=""),s.value=a.value.length);break;case"Home":s.value=0;break;case"End":s.value=a.value.length;break;case"Escape":a.value="",s.value=0;break;case"Tab":if(p.length==1)if(n){const $=Object.keys(H).filter(U=>U.startsWith(n));$.length==1?(a.value=$[0]+" ",s.value=a.value.length):$.length>1?t.innerHTML+=`<pre class="${d(r).text.secondary} break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base">Suggestions: ${$.join(", ")}</pre>`:t.innerHTML+=`<pre class="${d(r).text.secondary} break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base">No suggestions found for "${n}"</pre>`}else t.innerHTML+=`<pre class="${d(r).text.secondary} break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base">Type 'help' for a list of commands</pre>`;break;default:e.key.length==1&&(a.value=a.value.slice(0,s.value)+e.key+a.value.slice(s.value),s.value++);break}}function m(){requestAnimationFrame(()=>{o==null||o.scrollIntoView({behavior:"smooth",block:"end"})})}function h(e,n=[]){return e.startsWith("./")?ue.includes(e.slice(2))?(window.removeEventListener("keydown",l),ve.value=!1,pe(e.slice(2)),`MESh: launching program <span class="${d(r).text.warning} font-semibold">${e.slice(2)}</span>`):`MESh: program not found: <span class="${d(r).text.error} font-semibold">${e.slice(2)}</span>`:e in H?H[e].cmd(n):`MESh: command not found: <span class="${d(r).text.error} font-semibold">${e}</span>`}function u(e,n){const p=Math.max(0,Math.min(n,e.length));return n==e.length?e+`<span class="${d(r).bg.cursor} text-black animate-[pulse_1s_ease_infinite]">&nbsp</span>`:e.slice(0,p)+`<span class="${d(r).bg.cursor} text-black animate-[pulse_1s_ease_infinite]">${e[p]}</span>`+e.slice(p+1)}var g=me();de("1uha8ag",e=>{ne(()=>{ie.title="MESh - v0.0.2"})});var c=y(g),f=y(c),F=y(f);T(F,()=>h("banner")),k(f),k(c),R(c,e=>t=e,()=>t);var M=D(c,2),W=y(M);T(W,N),k(M);var E=D(M,2),j=y(E);T(j,()=>u(a.value,s.value)),k(E),k(g),R(g,e=>o=e,()=>o),I(()=>ce(E,1,`cmd-input break-all ${d(r).text.secondary??""} text-xs sm:text-base`)),te(b,g),le()}export{we as component};
