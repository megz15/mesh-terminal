import{a as C,c as U,f as V,h as W,b as Y}from"../chunks/P49aM0Xt.js";import{i as Z}from"../chunks/BgqkNlm-.js";import{t as K,h as I,a as D,l as Q,m as X,i as O,n as ee,o as ae,v as se,s as te,w,x as re,y as le,z as ne,A as g,B as c,C as R,$ as oe,D as b,u as S,F as y,G as B,I as E,J as N}from"../chunks/CCO0EpHD.js";import{b as j}from"../chunks/CPez_SJs.js";import{r as $,c as T,g as J,H as ie,a as ue,b as ve,d as ce,e as fe}from"../chunks/DqmBQamS.js";function A(H,M,t=!1,f=!1,L=!1){var m=H,d="";K(()=>{var v=Q;if(d===(d=M()??"")){I&&D();return}if(v.nodes_start!==null&&(X(v.nodes_start,v.nodes_end),v.nodes_start=v.nodes_end=null),d!==""){if(I){O.data;for(var n=D(),_=n;n!==null&&(n.nodeType!==8||n.data!=="");)_=n,n=ee(n);if(n===null)throw ae(),se;C(O,_),m=te(n);return}var p=d+"";t?p=`<svg>${p}</svg>`:f&&(p=`<math>${p}</math>`);var o=U(p);if((t||f)&&(o=w(o)),C(w(o),o.lastChild),t||f)for(;w(o);)m.before(w(o));else m.before(o)}})}var a=$(()=>ue),r=$(()=>fe),l=$(()=>ce),e=$(()=>ve),pe=V('<div class="input"><div id="outputHistory"><pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"><!></pre></div> <span id="prompt"><!></span> <span class="cmd-input sm:break-all text-gray-200"><!></span></div>');function be(H,M){re(M,!1);let t=R(),f=R();le(()=>{const s=localStorage.getItem("MESh_commandHistory");if(s)try{r(r().value=JSON.parse(s))}catch(i){console.error(i),r(r().value=[])}else r(r().value=[]);window.onload=()=>{window.addEventListener("keydown",i=>{i.preventDefault(),L();const u=a().value.trim(),h=u.split(" ");switch(i.key){case"Backspace":e().value>0&&(a(a().value=a().value.slice(0,e().value-1)+a().value.slice(e().value)),e(e().value--));break;case"Delete":e().value<a().value.length&&a(a().value=a().value.slice(0,e().value)+a().value.slice(e().value+1));break;case"Enter":const q=J();g(t,c(t).innerHTML+=`<pre class="text-gray-200 font-[Jetbrains_Mono]">${q} ${u}</pre>`),u&&(r().value.push(u),r().value.length>ie&&r().value.shift(),localStorage.setItem("MESh_commandHistory",JSON.stringify(r().value))),l(l().value=-1);const z=m(h[0],h.slice(1));h[0]!="clear"&&h[0]!=""&&h[0]!="cd"&&g(t,c(t).innerHTML+=`<pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"> &gt&gt ${z}</pre>`),a(a().value=""),e(e().value=0);break;case"ArrowLeft":e().value>0&&e(e().value--);break;case"ArrowRight":e().value<a().value.length&&e(e().value++);break;case"ArrowUp":r().value.length>0&&(l().value===-1?l(l().value=r().value.length-1):l().value>0&&l(l().value--),a(a().value=r().value[l().value]),e(e().value=a().value.length));break;case"ArrowDown":r().value.length>0&&l().value!==-1&&(l().value<r().value.length-1?(l(l().value++),a(a().value=r().value[l().value])):(l(l().value=-1),a(a().value="")),e(e().value=a().value.length));break;case"Home":e(e().value=0);break;case"End":e(e().value=a().value.length);break;case"Escape":a(a().value=""),e(e().value=0);break;case"Tab":if(h.length==1)if(u){const k=Object.keys(T).filter(G=>G.startsWith(u));k.length===1?(a(a().value=k[0]+" "),e(e().value=a().value.length)):k.length>1?g(t,c(t).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">Suggestions: ${k.join(", ")}</pre>`):g(t,c(t).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">No suggestions found for "${u}"</pre>`)}else g(t,c(t).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">Type 'help' for a list of commands</pre>`);break;default:i.key.length==1&&(a(a().value=a().value.slice(0,e().value)+i.key+a().value.slice(e().value)),e(e().value++));break}})}});function L(){requestAnimationFrame(()=>{var s;(s=c(f))==null||s.scrollIntoView({behavior:"smooth",block:"end"})})}function m(s,i=[]){return s in T?T[s].cmd(i):`MESh: command not found: <span class="text-red-400 font-semibold">${s}</span>`}function d(s,i){const u=Math.max(0,Math.min(i,s.length));return i===s.length?s+'<span class="bg-gray-300 text-black animate-[pulse_1s_ease_infinite]">&nbsp</span>':s.slice(0,u)+`<span class="bg-gray-300 text-black animate-[pulse_1s_ease_infinite]">${s[u]}</span>`+s.slice(u+1)}Z();var v=pe();W(s=>{oe.title="MESh - v0.0.1"});var n=b(v),_=b(n),p=b(_);A(p,()=>S(()=>m("banner"))),y(_),y(n),j(n,s=>N(t,s),()=>c(t));var o=B(n,2),F=b(o);A(F,()=>(E(J),S(J))),y(o);var x=B(o,2),P=b(x);A(P,()=>(E(a()),E(e()),S(()=>d(a().value,e().value)))),y(x),y(v),j(v,s=>N(f,s),()=>c(f)),Y(H,v),ne()}export{be as component};
