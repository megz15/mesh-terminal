import"../chunks/Bzak7iHL.js";import"../chunks/Bgw2Q8tC.js";import{o as Y}from"../chunks/E4gp2prH.js";import{t as Z,h as E,a as I,L as z,M as ee,N as O,O as U,P as A,Q as ae,R as se,T as R,c as N,U as te,V as H,W as re,b as le,X as ne,d as j,p as oe,f as ie,g as ue,i as ve,w as _,o as p,q as B,G as ce,$ as fe,j as k,k as w,u as F,l as K}from"../chunks/vVpLNVti.js";import{b as P}from"../chunks/BEunfoRK.js";import{i as pe}from"../chunks/DAsP8pd3.js";import{r as T,g as M,c as J,a as W,H as me,p as de,b as ge,d as he,e as _e,t as be,f as ye}from"../chunks/CjmkdfsZ.js";import{g as $e}from"../chunks/DLLXqAmx.js";function C(b,y,t=!1,c=!1,g=!1){var n=b,v="";Z(()=>{var h=z;if(v===(v=y()??"")){E&&I();return}if(h.nodes!==null&&(ee(h.nodes.start,h.nodes.end),h.nodes=null),v!==""){if(E){O.data;for(var o=I(),d=o;o!==null&&(o.nodeType!==U||o.data!=="");)d=o,o=A(o);if(o===null)throw ae(),se;R(O,d),n=N(o);return}var m=v+"";t?m=`<svg>${m}</svg>`:c&&(m=`<math>${m}</math>`);var f=te(m);if((t||c)&&(f=H(f)),R(H(f),f.lastChild),t||c)for(;H(f);)n.before(H(f));else n.before(f)}})}function ke(b,y){let t=null,c=E;var g;if(E){t=O;for(var n=H(document.head);n!==null&&(n.nodeType!==U||n.data!==b);)n=A(n);if(n===null)j(!1);else{var v=A(n);n.remove(),N(v)}}E||(g=document.head.appendChild(re()));try{le(()=>y(g),ne)}finally{c&&(j(!0),N(t))}}var a=T(()=>ge),r=T(()=>ye),l=T(()=>_e),e=T(()=>he),q=T(()=>be),we=ie('<div class="input"><div id="outputHistory"><pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"><!></pre></div> <span id="prompt"><!></span> <span class="cmd-input sm:break-all text-gray-200"><!></span></div>');function Ce(b,y){oe(y,!1);let t=B(),c=B();Y(()=>{const s=localStorage.getItem("MESh_commandHistory");if(s)try{r(r().value=JSON.parse(s))}catch(i){console.error(i),r(r().value=[])}else r(r().value=[]);window.addEventListener("keydown",g)});function g(s){s.preventDefault(),n();const i=a().value.trim(),u=i.split(" ");if(s.key=="c"&&s.ctrlKey){M(),_(t,p(t).innerHTML+=`<pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"> &gt&gt ${v("exit")}</pre>`),a(a().value=""),e(e().value=0);return}switch(s.key){case"Backspace":e().value>0&&(a(a().value=a().value.slice(0,e().value-1)+a().value.slice(e().value)),e(e().value--));break;case"Delete":e().value<a().value.length&&a(a().value=a().value.slice(0,e().value)+a().value.slice(e().value+1));break;case"Enter":M();const $=W();_(t,p(t).innerHTML+=`<pre class="text-gray-200 font-[Jetbrains_Mono]">${$} ${i}</pre>`),i&&(r().value.push(i),r().value.length>me&&r().value.shift(),localStorage.setItem("MESh_commandHistory",JSON.stringify(r().value))),l(l().value=-1);const Q=v(u[0],u.slice(1));u[0]!="clear"&&u[0]!=""&&u[0]!="cd"&&_(t,p(t).innerHTML+=`<pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"> &gt&gt ${Q}</pre>`),a(a().value=""),e(e().value=0);break;case"ArrowLeft":e().value>0&&e(e().value--);break;case"ArrowRight":e().value<a().value.length&&e(e().value++);break;case"ArrowUp":r().value.length>0&&(l().value==-1?l(l().value=r().value.length-1):l().value>0&&l(l().value--),a(a().value=r().value[l().value]),e(e().value=a().value.length));break;case"ArrowDown":r().value.length>0&&l().value!==-1&&(l().value<r().value.length-1?(l(l().value++),a(a().value=r().value[l().value])):(l(l().value=-1),a(a().value="")),e(e().value=a().value.length));break;case"Home":e(e().value=0);break;case"End":e(e().value=a().value.length);break;case"Escape":a(a().value=""),e(e().value=0);break;case"Tab":if(u.length==1){const x=M();if(i){const S=Object.keys(J).filter(X=>X.startsWith(i));S.length==1?(a(a().value=S[0]+" "),e(e().value=a().value.length)):S.length>1?_(t,p(t).innerHTML+=`<pre class="${x.text.secondary} font-[Jetbrains_Mono]">Suggestions: ${S.join(", ")}</pre>`):_(t,p(t).innerHTML+=`<pre class="${x.text.secondary} font-[Jetbrains_Mono]">No suggestions found for "${i}"</pre>`)}else _(t,p(t).innerHTML+=`<pre class="${x.text.secondary} font-[Jetbrains_Mono]">Type 'help' for a list of commands</pre>`)}break;default:s.key.length==1&&(a(a().value=a().value.slice(0,e().value)+s.key+a().value.slice(e().value)),e(e().value++));break}}function n(){requestAnimationFrame(()=>{var s;(s=p(c))==null||s.scrollIntoView({behavior:"smooth",block:"end"})})}function v(s,i=[]){const u=M();return s.startsWith("./")?de.includes(s.slice(2))?(window.removeEventListener("keydown",g),q(q().value=!1),$e(s.slice(2)),`MESh: launching program <span class="${u.text.warning} font-semibold">${s.slice(2)}</span>`):`MESh: program not found: <span class="${u.text.error} font-semibold">${s.slice(2)}</span>`:s in J?J[s].cmd(i):`MESh: command not found: <span class="${u.text.error} font-semibold">${s}</span>`}function h(s,i){const u=M(),$=Math.max(0,Math.min(i,s.length));return i==s.length?s+`<span class="${u.bg.cursor} text-black animate-[pulse_1s_ease_infinite]">&nbsp</span>`:s.slice(0,$)+`<span class="${u.bg.cursor} text-black animate-[pulse_1s_ease_infinite]">${s[$]}</span>`+s.slice($+1)}pe();var o=we();ke("1uha8ag",s=>{ce(()=>{fe.title="MESh - v0.0.2"})});var d=k(o),m=k(d),f=k(m);C(f,()=>v("banner")),w(m),w(d),P(d,s=>F(t,s),()=>p(t));var L=K(d,2),V=k(L);C(V,W),w(L);var D=K(L,2),G=k(D);C(G,()=>h(a().value,e().value)),w(D),w(o),P(o,s=>F(c,s),()=>p(c)),ue(b,o),ve()}export{Ce as component};
