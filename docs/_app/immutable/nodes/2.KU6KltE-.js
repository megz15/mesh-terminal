import"../chunks/Bzak7iHL.js";import"../chunks/DlUC6qYm.js";import{o as Q}from"../chunks/COIXPI3M.js";import{t as X,h as M,a as A,L as Y,M as Z,N as x,O as P,P as J,Q as z,R as ee,T as N,c as C,U as ae,V as $,W as se,b as te,X as re,d as D,p as le,f as ne,g as ie,i as oe,w as _,o as p,q as I,G as ue,$ as ve,j as k,k as w,u as R,l as j}from"../chunks/BghsN6o4.js";import{b as B}from"../chunks/o34I1p38.js";import{i as fe}from"../chunks/jtwxj7k6.js";import{r as H,c as S,g as F,H as ce,p as pe,a as me,b as de,d as ge,t as he,e as _e}from"../chunks/Cf0lM_30.js";import{g as be}from"../chunks/Dt1TNIDv.js";function L(b,y,t=!1,f=!1,g=!1){var n=b,u="";X(()=>{var h=Y;if(u===(u=y()??"")){M&&A();return}if(h.nodes!==null&&(Z(h.nodes.start,h.nodes.end),h.nodes=null),u!==""){if(M){x.data;for(var i=A(),d=i;i!==null&&(i.nodeType!==P||i.data!=="");)d=i,i=J(i);if(i===null)throw z(),ee;N(x,d),n=C(i);return}var m=u+"";t?m=`<svg>${m}</svg>`:f&&(m=`<math>${m}</math>`);var c=ae(m);if((t||f)&&(c=$(c)),N($(c),c.lastChild),t||f)for(;$(c);)n.before($(c));else n.before(c)}})}function ye(b,y){let t=null,f=M;var g;if(M){t=x;for(var n=$(document.head);n!==null&&(n.nodeType!==P||n.data!==b);)n=J(n);if(n===null)D(!1);else{var u=J(n);n.remove(),C(u)}}M||(g=document.head.appendChild(se()));try{te(()=>y(g),re)}finally{f&&(D(!0),C(t))}}var a=H(()=>me),r=H(()=>_e),l=H(()=>ge),e=H(()=>de),K=H(()=>he),ke=ne('<div class="input"><div id="outputHistory"><pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"><!></pre></div> <span id="prompt"><!></span> <span class="cmd-input sm:break-all text-gray-200"><!></span></div>');function xe(b,y){le(y,!1);let t=I(),f=I();Q(()=>{const s=localStorage.getItem("MESh_commandHistory");if(s)try{r(r().value=JSON.parse(s))}catch(o){console.error(o),r(r().value=[])}else r(r().value=[]);window.addEventListener("keydown",g)});function g(s){s.preventDefault(),n();const o=a().value.trim(),v=o.split(" ");if(s.key=="c"&&s.ctrlKey){_(t,p(t).innerHTML+=`<pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"> &gt&gt ${u("exit")}</pre>`),a(a().value=""),e(e().value=0);return}switch(s.key){case"Backspace":e().value>0&&(a(a().value=a().value.slice(0,e().value-1)+a().value.slice(e().value)),e(e().value--));break;case"Delete":e().value<a().value.length&&a(a().value=a().value.slice(0,e().value)+a().value.slice(e().value+1));break;case"Enter":const U=F();_(t,p(t).innerHTML+=`<pre class="text-gray-200 font-[Jetbrains_Mono]">${U} ${o}</pre>`),o&&(r().value.push(o),r().value.length>ce&&r().value.shift(),localStorage.setItem("MESh_commandHistory",JSON.stringify(r().value))),l(l().value=-1);const V=u(v[0],v.slice(1));v[0]!="clear"&&v[0]!=""&&v[0]!="cd"&&_(t,p(t).innerHTML+=`<pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"> &gt&gt ${V}</pre>`),a(a().value=""),e(e().value=0);break;case"ArrowLeft":e().value>0&&e(e().value--);break;case"ArrowRight":e().value<a().value.length&&e(e().value++);break;case"ArrowUp":r().value.length>0&&(l().value==-1?l(l().value=r().value.length-1):l().value>0&&l(l().value--),a(a().value=r().value[l().value]),e(e().value=a().value.length));break;case"ArrowDown":r().value.length>0&&l().value!==-1&&(l().value<r().value.length-1?(l(l().value++),a(a().value=r().value[l().value])):(l(l().value=-1),a(a().value="")),e(e().value=a().value.length));break;case"Home":e(e().value=0);break;case"End":e(e().value=a().value.length);break;case"Escape":a(a().value=""),e(e().value=0);break;case"Tab":if(v.length==1)if(o){const E=Object.keys(S).filter(G=>G.startsWith(o));E.length==1?(a(a().value=E[0]+" "),e(e().value=a().value.length)):E.length>1?_(t,p(t).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">Suggestions: ${E.join(", ")}</pre>`):_(t,p(t).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">No suggestions found for "${o}"</pre>`)}else _(t,p(t).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">Type 'help' for a list of commands</pre>`);break;default:s.key.length==1&&(a(a().value=a().value.slice(0,e().value)+s.key+a().value.slice(e().value)),e(e().value++));break}}function n(){requestAnimationFrame(()=>{var s;(s=p(f))==null||s.scrollIntoView({behavior:"smooth",block:"end"})})}function u(s,o=[]){return s.startsWith("./")?pe.includes(s.slice(2))?(window.removeEventListener("keydown",g),K(K().value=!1),be(s.slice(2)),`MESh: launching program <span class="text-yellow-400 font-semibold">${s.slice(2)}</span>`):`MESh: program not found: <span class="text-red-400 font-semibold">${s.slice(2)}</span>`:s in S?S[s].cmd(o):`MESh: command not found: <span class="text-red-400 font-semibold">${s}</span>`}function h(s,o){const v=Math.max(0,Math.min(o,s.length));return o==s.length?s+'<span class="bg-gray-300 text-black animate-[pulse_1s_ease_infinite]">&nbsp</span>':s.slice(0,v)+`<span class="bg-gray-300 text-black animate-[pulse_1s_ease_infinite]">${s[v]}</span>`+s.slice(v+1)}fe();var i=ke();ye("1uha8ag",s=>{ue(()=>{ve.title="MESh - v0.0.2"})});var d=k(i),m=k(d),c=k(m);L(c,()=>u("banner")),w(m),w(d),B(d,s=>R(t,s),()=>p(t));var T=j(d,2),W=k(T);L(W,F),w(T);var O=j(T,2),q=k(O);L(q,()=>h(a().value,e().value)),w(O),w(i),B(i,s=>R(f,s),()=>p(f)),ie(b,i),oe()}export{xe as component};
