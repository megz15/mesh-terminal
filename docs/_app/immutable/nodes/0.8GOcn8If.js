import{f as D,a as R}from"../chunks/B8lfIcJ7.js";import{s as W,h as H,M as Ee,J as Te,a as ke,b as de,D as p,ab as pe,r as Me,c as He,d as le,e as G,i as I,Y as Se,f as me,g as ae,p as we,a0 as ge,a7 as Ce,G as P,ac as ne,ad as U,O as ie,ae as $e,af as Ie,ag as Ne,_ as Le,ah as Ae,ai as he,aj as Re,ak as De,L as Je,E as Oe,al as Be,j as te,t as j,l as re,m as N,n as C,o as L,u as Z,q as Q,V as B,T as $,k as Ke}from"../chunks/DypGfgoI.js";import{e as Pe,d as Ve}from"../chunks/C5gSQh23.js";import{i as oe}from"../chunks/DJtajE6k.js";import"../chunks/DPU5IEas.js";import{s as V}from"../chunks/CKbdqrTY.js";import{i as _e}from"../chunks/CntupMq3.js";import{c as A,f as J,p as z,r as Y,e as M,g as ze,H as Xe,a as Ye,b as qe,t as O,d as Fe}from"../chunks/DiB3XbNj.js";import{p as X}from"../chunks/qb2mF8Ol.js";import{o as We}from"../chunks/ChHpGbdi.js";import{g as ee,a as Ge}from"../chunks/DwD4BQrk.js";function ue(i,e){return e}function Ue(i,e,a,l){for(var c=[],t=e.length,f=0;f<t;f++)Ne(e[f].e,c,!0);var g=t>0&&c.length===0&&a!==null;if(g){var m=a.parentNode;Le(m),m.append(a),l.clear(),w(i,e[0].prev,e[t-1].next)}Ae(c,()=>{for(var h=0;h<t;h++){var s=e[h];g||(l.delete(s.k),w(i,s.prev,s.next)),he(s.e,!g)}})}function ve(i,e,a,l,c,t=null){var f=i,g={flags:e,items:new Map,first:null};{var m=i;f=H?W(Ee(m)):m.appendChild(Te())}H&&ke();var h=null,s=!1,_=pe(()=>{var r=a();return Ce(r)?r:r==null?[]:ge(r)});de(()=>{var r=p(_),v=r.length;if(s&&v===0)return;s=v===0;let d=!1;if(H){var S=Me(f)===He;S!==(v===0)&&(f=le(),W(f),G(!1),d=!0)}if(H){for(var b=null,u,x=0;x<v;x++){if(I.nodeType===8&&I.data===Se){f=I,d=!0,G(!1);break}var T=r[x],E=l(T,x);u=be(I,g,b,null,T,E,x,c,e,a),g.items.set(E,u),b=u}v>0&&W(le())}H||Ze(r,g,f,c,e,l,a),t!==null&&(v===0?h?me(h):h=ae(()=>t(f)):h!==null&&we(h,()=>{h=null})),d&&G(!0),p(_)}),H&&(f=I)}function Ze(i,e,a,l,c,t,f){var g=i.length,m=e.items,h=e.first,s=h,_,r=null,v=[],d=[],S,b,u,x;for(x=0;x<g;x+=1){if(S=i[x],b=t(S,x),u=m.get(b),u===void 0){var T=s?s.e.nodes_start:a;r=be(T,e,r,r===null?e.first:r.next,S,b,x,l,c,f),m.set(b,r),v=[],d=[],s=r.next;continue}if(Qe(u,S,x),(u.e.f&U)!==0&&me(u.e),u!==s){if(_!==void 0&&_.has(u)){if(v.length<d.length){var E=d[0],k;r=E.prev;var se=v[0],q=v[v.length-1];for(k=0;k<v.length;k+=1)fe(v[k],E,a);for(k=0;k<d.length;k+=1)_.delete(d[k]);w(e,se.prev,q.next),w(e,r,se),w(e,q,E),s=E,r=q,x-=1,v=[],d=[]}else _.delete(u),fe(u,s,a),w(e,u.prev,u.next),w(e,u,r===null?e.first:r.next),w(e,r,u),r=u;continue}for(v=[],d=[];s!==null&&s.k!==b;)(s.e.f&U)===0&&(_??(_=new Set)).add(s),d.push(s),s=s.next;if(s===null)continue;u=s}v.push(u),r=u,s=u.next}if(s!==null||_!==void 0){for(var F=_===void 0?[]:ge(_);s!==null;)(s.e.f&U)===0&&F.push(s),s=s.next;var xe=F.length;if(xe>0){var ye=g===0?a:null;Ue(e,F,ye,m)}}ie.first=e.first&&e.first.e,ie.last=r&&r.e}function Qe(i,e,a,l){Ie(i.v,e),i.i=a}function be(i,e,a,l,c,t,f,g,m,h){var s=(m&Re)!==0,_=(m&De)===0,r=s?_?P(c,!1,!1):ne(c):c,v=(m&$e)===0?f:ne(f),d={i:v,v:r,k:t,a:null,e:null,prev:a,next:l};try{return d.e=ae(()=>g(i,r,v,h),H),d.e.prev=a&&a.e,d.e.next=l&&l.e,a===null?e.first=d:(a.next=d,a.e.next=d.e),l!==null&&(l.prev=d,l.e.prev=d.e),d}finally{}}function fe(i,e,a){for(var l=i.next?i.next.e.nodes_start:a,c=e?e.e.nodes_start:a,t=i.e.nodes_start;t!==l;){var f=Je(t);c.before(t),t=f}}function w(i,e,a){e===null?i.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function je(i,e,...a){var l=i,c=Be,t;de(()=>{c!==(c=e())&&(t&&(he(t),t=null),t=ae(()=>c(l,...a)))},Oe),H&&(l=I)}function ea(i,e,a){var l=i==null?"":""+i;return l===""?null:l}function ce(i,e,a,l,c,t){var f=i.__className;if(H||f!==a||f===void 0){var g=ea(a);(!H||g!==i.getAttribute("class"))&&(g==null?i.removeAttribute("class"):i.className=g),i.__className=a}return t}var aa=D('<div id="top-bar" class="bg-neutral-950 rounded-lg border-1 border-gray-500 w-[98%] h-10 fixed top-2 left-1/2 translate-x-[-50%] flex items-center gap-2 pl-4 z-50"><span class="text-gray-500"> </span> <span class="text-gray-400">|</span> <span class="text-gray-400"> </span> <span class="text-gray-400 max-sm:hidden">|</span> <span class="text-gray-500 max-sm:hidden"> </span></div>');function ta(i,e){te(e,!1);let a=X.url.pathname.split("/")[2];_e();var l=aa(),c=N(l),t=N(c);C(c);var f=L(c,4),g=N(f,!0);C(f);var m=L(f,4),h=N(m,!0);C(m),C(l),j(s=>{V(t,`#!${Q(J),Z(()=>J.SHELL)??""}`),V(g,(Q(J),Z(()=>a||J.TERM+" v"+J.VERSION))),V(h,s)},[()=>(Q(A),Z(()=>a?"Ctrl + C to eXit":"Loaded ["+Object.keys(A).length+"] commands"))],pe),R(i,l),re()}var o=Y(()=>Ye),y=Y(()=>Fe),n=Y(()=>qe),K=Y(()=>O),ra=D("<button> </button>"),sa=D('<div class="flex gap-1.5"></div>'),la=D("<div></div>");function na(i,e){te(e,!1);let a=P(!1),l=P(!1),c=z.includes(X.url.pathname.split("/")[2]),t=P();We(()=>{B(t,document.getElementById("outputHistory"))});const f=[["Esc","1","2","3","4","5","6","7","8","9","0","-","="],["Tab","q","w","e","r","t","y","u","i","o","p","[","]"],["Shift","a","s","d","f","g","h","j","k","l",";","'","\\"],["Home","End","z","x","c","v","b","n","m",",",".","/"],["Ctrl","←","↑","↓","→","Space","Enter","Back","Del"]],g=[["Esc","!","@","#","₹","%","^","&","*","(",")","_","+"],["Tab","Q","W","E","R","T","Y","U","I","O","P","{","}"],["Shift","A","S","D","F","G","H","J","K","L",":",'"',"|"],["Home","Nether","Z","X","C","V","B","N","M","<",">","?"],["Ctrl","←","↑","↓","→","Space","Enter","Back","Del"]];_e();var m=la();ve(m,5,()=>p(a)?g:f,ue,(h,s)=>{var _=sa();ve(_,5,()=>p(s),ue,(r,v)=>{var d=ra(),S=N(d,!0);C(d),j(()=>{d.disabled=p(v)=="Ctrl"||p(v)=="c"||p(v)=="C"?!1:p(l),ce(d,1,`${p(l)&&!(p(v)=="Ctrl"||p(v)=="c"||p(v)=="C")?"opacity-20 pointer-events-none":"opacity-100"} px-3 py-2 text-lg bg-neutral-950 border border-gray-400 rounded-lg text-gray-200 cursor-pointer`),V(S,p(v))}),Pe("click",d,()=>{const b=o().value.trim(),u=b.split(" ");switch(p(v)){case"Back":n().value>0&&(o(o().value=o().value.slice(0,n().value-1)+o().value.slice(n().value)),n(n().value--));break;case"Del":n().value<o().value.length&&o(o().value=o().value.slice(0,n().value)+o().value.slice(n().value+1));break;case"Enter":const x=ze();$(t,p(t).innerHTML+=`<pre class="text-gray-200 font-[Jetbrains_Mono]">${x} ${b}</pre>`),b&&(M.value.push(b),M.value.length>Xe&&M.value.shift(),localStorage.setItem("MESh_commandHistory",JSON.stringify(M.value))),y(y().value=-1);let T;u[0].startsWith("./")&&(z.includes(u[0].slice(2))?(K(K().value=!1),ee(u[0].slice(2)),T=`MESh: launching program <span class="text-yellow-400 font-semibold">${u[0].slice(2)}</span>`):T=`MESh: program not found: <span class="text-red-400 font-semibold">${u[0].slice(2)}</span>`),u[0]in A?T=A[u[0]].cmd(u.slice(1)):T=`MESh: command not found: <span class="text-red-400 font-semibold">${u}</span>`,u[0]!="clear"&&u[0]!=""&&u[0]!="cd"&&$(t,p(t).innerHTML+=`<pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"> &gt&gt ${T}</pre>`),o(o().value=""),n(n().value=0);break;case"←":n().value>0&&n(n().value--);break;case"→":n().value<o().value.length&&n(n().value++);break;case"↑":M.value.length>0&&(y().value===-1?y(y().value=M.value.length-1):y().value>0&&y(y().value--),o(o().value=M.value[y().value]),n(n().value=o().value.length));break;case"↓":M.value.length>0&&y().value!==-1&&(y().value<M.value.length-1?(y(y().value++),o(o().value=M.value[y().value])):(y(y().value=-1),o(o().value="")),n(n().value=o().value.length));break;case"Home":n(n().value=0);break;case"Nether":case"End":n(n().value=o().value.length);break;case"Esc":o(o().value=""),n(n().value=0);break;case"Tab":if(u.length==1)if(b){const E=Object.keys(A).filter(k=>k.startsWith(b));E.length===1?(o(o().value=E[0]+" "),n(n().value=o().value.length)):E.length>1?$(t,p(t).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">Suggestions: ${E.join(", ")}</pre>`):$(t,p(t).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">No suggestions found for "${b}"</pre>`)}else $(t,p(t).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">Type 'help' for a list of commands</pre>`);break;case"Space":o(o().value=o().value.slice(0,n().value)+" "+o().value.slice(n().value)),n(n().value++);break;case"Shift":B(a,!p(a));break;case"Ctrl":B(l,!p(l));break;case"c":case"C":if(p(l))if(c){K(K().value=!1),ee("/mesh-terminal/");break}else{$(t,p(t).innerHTML+=`<pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"> &gt&gt ${A.exit.cmd([])}</pre>`),o(o().value=""),n(n().value=0),B(l,!1);break}default:p(v).length==1&&(o(o().value=o().value.slice(0,n().value)+p(v)+o().value.slice(n().value)),n(n().value++));break}}),R(r,d)}),C(_),R(h,_)}),C(m),j(()=>ce(m,1,`z-50 flex flex-col gap-1.5 pt-4 ${c?"fixed overflow-x-auto bottom-4 max-md:w-screen max-md:left-0 max-md:mb-16 md:left-[50%] md:translate-x-[-50%]":"max-sm:mb-10"}`)),R(i,m),re()}var ia=D(`<div class="fixed bottom-4 left-4 text-yellow-400 text-sm z-[-1]">Press 'Ctrl + C'<br/>to eXit program</div>`),oa=D('<!> <!> <!> <!> <div class="flex justify-end"><button class="px-3 py-2 text-sm bg-neutral-950 border border-gray-400 rounded-lg text-gray-200 cursor-pointer fixed bottom-4 right-4">Toggle Keyboard</button></div>',1);function xa(i,e){te(e,!0);function a(r){r.key=="c"&&r.ctrlKey&&(O.value=!1,ee("/mesh-terminal/"))}Ge(()=>{z.includes(X.url.pathname.split("/")[2])&&window.addEventListener("keydown",a)});var l=oa(),c=Ke(l);ta(c,{});var t=L(c,2);je(t,()=>e.children);var f=L(t,2);{var g=r=>{na(r,{})};oe(f,r=>{O.value&&r(g)})}var m=L(f,2);{var h=r=>{var v=ia();R(r,v)};oe(m,r=>{z.includes(X.url.pathname.split("/")[2])&&r(h)})}var s=L(m,2),_=N(s);_.__click=()=>O.value=!O.value,C(s),R(i,l),re()}Ve(["click"]);export{xa as component};
