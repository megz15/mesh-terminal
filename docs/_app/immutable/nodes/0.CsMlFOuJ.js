import"../chunks/Bzak7iHL.js";import{o as ke,s as Ce}from"../chunks/wXLI8w2A.js";import{c as te,h as A,Z as He,_ as se,a as Ne,b as Be,o as p,aw as Ie,r as Re,H as Ae,s as me,d as le,R as W,T as Le,ax as Oe,ay as ge,a1 as De,a5 as ie,a7 as Je,az as ce,ae as ze,aA as be,p as q,aB as Pe,aC as Ke,aD as Fe,aE as L,a2 as Ee,a4 as Te,aF as ne,U as Ue,aG as Ve,a3 as Xe,aH as Ge,M as pe,i as z,t as X,k as J,O as de,m as D,n as I,l as H,aI as we,v as K,u as Y,j as We,x as P,A as he,aJ as Ye}from"../chunks/CLgYDTrq.js";import{i as ue}from"../chunks/aphj1UGp.js";import{s as Me}from"../chunks/D2V9E9ev.js";import{b as Ze}from"../chunks/etNz91Zm.js";import{g as x,c as F,h as oe,i as U,t as G,p as Q,r as ee,f as N,a as qe,H as Qe,b as je,d as ea,e as aa,j as _e,k as ra}from"../chunks/Dc6WnkN5.js";import{p as j}from"../chunks/BCVh9ltT.js";import"../chunks/BvcyTcfG.js";import{i as ta}from"../chunks/BauU7rzF.js";import{g as fe,a as sa}from"../chunks/_3FPoOXV.js";function xe(e,i){return i}function la(e,i,t){for(var v=[],h=i.length,s,c=i.length,r=0;r<h;r++){let b=i[r];Te(b,()=>{if(s){if(s.pending.delete(b),s.done.add(b),s.pending.size===0){var y=e.outrogroups;ve(ce(s.done)),y.delete(s),y.size===0&&(e.outrogroups=null)}}else c-=1},!1)}if(c===0){var m=v.length===0&&t!==null;if(m){var l=t,g=l.parentNode;Ve(g),g.append(l),e.items.clear()}ve(i,!m)}else s={pending:new Set(i),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(s)}function ve(e,i=!0){for(var t=0;t<e.length;t++)Xe(e[t],i)}var ye;function $e(e,i,t,v,h,s=null){var c=e,r=new Map;{var m=e;c=A?te(He(m)):m.appendChild(se())}A&&Ne();var l=null,g=Ie(()=>{var d=t();return ze(d)?d:d==null?[]:ce(d)}),b,y=!0;function u(){E.fallback=l,na(E,b,c,i,v),l!==null&&(b.length===0?(l.f&L)===0?Ee(l):(l.f^=L,V(l,null,c)):Te(l,()=>{l=null}))}var a=Be(()=>{b=p(g);var d=b.length;let f=!1;if(A){var _=Re(c)===Ae;_!==(d===0)&&(c=me(),te(c),le(!1),f=!0)}for(var M=new Set,$=De,T=Je(),S=0;S<d;S+=1){A&&W.nodeType===Le&&W.data===Oe&&(c=W,f=!0,le(!1));var O=b[S],B=v(O,S),k=y?null:r.get(B);k?(k.v&&ge(k.v,O),k.i&&ge(k.i,S),T&&$.skipped_effects.delete(k.e)):(k=oa(r,y?c:ye??(ye=se()),O,B,S,h,i,t),y||(k.e.f|=L),r.set(B,k)),M.add(B)}if(d===0&&s&&!l&&(y?l=ie(()=>s(c)):(l=ie(()=>s(ye??(ye=se()))),l.f|=L)),A&&d>0&&te(me()),!y)if(T){for(const[ae,re]of r)M.has(ae)||$.skipped_effects.add(re.e);$.oncommit(u),$.ondiscard(()=>{})}else u();f&&le(!0),p(g)}),E={effect:a,items:r,outrogroups:null,fallback:l};y=!1,A&&(c=W)}function na(e,i,t,v,h){var B;var s=i.length,c=e.items,r=e.effect.first,m,l=null,g=[],b=[],y,u,a,E;for(E=0;E<s;E+=1){if(y=i[E],u=h(y,E),a=c.get(u).e,e.outrogroups!==null)for(const k of e.outrogroups)k.pending.delete(a),k.done.delete(a);if((a.f&L)!==0)if(a.f^=L,a===r)V(a,null,t);else{var d=l?l.next:r;a===e.effect.last&&(e.effect.last=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),R(e,l,a),R(e,a,d),V(a,d,t),l=a,g=[],b=[],r=l.next;continue}if((a.f&ne)!==0&&Ee(a),a!==r){if(m!==void 0&&m.has(a)){if(g.length<b.length){var f=b[0],_;l=f.prev;var M=g[0],$=g[g.length-1];for(_=0;_<g.length;_+=1)V(g[_],f,t);for(_=0;_<b.length;_+=1)m.delete(b[_]);R(e,M.prev,$.next),R(e,l,M),R(e,$,f),r=f,l=$,E-=1,g=[],b=[]}else m.delete(a),V(a,r,t),R(e,a.prev,a.next),R(e,a,l===null?e.effect.first:l.next),R(e,l,a),l=a;continue}for(g=[],b=[];r!==null&&r!==a;)(m??(m=new Set)).add(r),b.push(r),r=r.next;if(r===null)continue}(a.f&L)===0&&g.push(a),l=a,r=a.next}if(e.outrogroups!==null){for(const k of e.outrogroups)k.pending.size===0&&(ve(ce(k.done)),(B=e.outrogroups)==null||B.delete(k));e.outrogroups.size===0&&(e.outrogroups=null)}if(r!==null||m!==void 0){var T=[];if(m!==void 0)for(a of m)(a.f&ne)===0&&T.push(a);for(;r!==null;)(r.f&ne)===0&&r!==e.fallback&&T.push(r),r=r.next;var S=T.length;if(S>0){var O=s===0?t:null;la(e,T,O)}}}function oa(e,i,t,v,h,s,c,r){var m=(c&Ke)!==0?(c&Fe)===0?q(t,!1,!1):be(t):null,l=(c&Pe)!==0?be(h):null;return{v:m,i:l,e:ie(()=>(s(i,m??t,l??h,r),()=>{e.delete(v)}))}}function V(e,i,t){if(e.nodes)for(var v=e.nodes.start,h=e.nodes.end,s=i&&(i.f&L)===0?i.nodes.start:t;v!==null;){var c=Ue(v);if(s.before(v),v===h)return;v=c}}function R(e,i,t){i===null?e.effect.first=t:i.next=t,t===null?e.effect.last=i:t.prev=i}function ia(e,i,t){var v=e==null?"":""+e;return v===""?null:v}function C(e,i,t,v,h,s){var c=e.__className;if(A||c!==t||c===void 0){var r=ia(t);(!A||r!==e.getAttribute("class"))&&(r==null?e.removeAttribute("class"):e.className=r),e.__className=t}return s}var ua=z('<div class="ml-auto pr-4 flex gap-2"><button type="button" title="Reload Mesh Terminal">üîÑ</button> <button type="button"> </button> <button type="button">Toggle Keyboard</button></div>'),fa=z('<div id="top-bar"><span> </span> <span>|</span> <span> </span> <span>|</span> <span> </span> <!></div>');function va(e,i){pe(i,!0);let t=we(()=>j.url.pathname.split("/")[2]);var v=fa(),h=D(v),s=D(h);I(h);var c=H(h,2),r=H(c,2),m=D(r,!0);I(r);var l=H(r,2),g=H(l,2),b=D(g,!0);I(g);var y=H(g,2);{var u=a=>{var E=ua(),d=D(E);d.__click=()=>location.reload();var f=H(d,2);f.__click=()=>U.value=!U.value;var _=D(f,!0);I(f);var M=H(f,2);M.__click=()=>G.value=!G.value,I(E),X(($,T,S,O,B,k,ae,re,Se)=>{C(d,1,`p-3 text-sm rounded-md ${$??""} ${T??""} border ${S??""} cursor-pointer`),C(f,1,`p-3 text-sm rounded-md ${O??""} ${B??""} border ${k??""} cursor-pointer`),Me(f,"title",`${U.value?"Pause":"Play"} Radio`),K(_,U.value?"‚è∏Ô∏è":"‚ñ∂Ô∏è"),C(M,1,`p-3 text-sm rounded-md ${ae??""} ${re??""} border ${Se??""} cursor-pointer`)},[()=>x().components.keyboardBg,()=>x().components.keyboardBorder,()=>x().text.primary,()=>x().components.keyboardBg,()=>x().components.keyboardBorder,()=>x().text.primary,()=>x().components.keyboardBg,()=>x().components.keyboardBorder,()=>x().text.primary]),J(a,E)};ue(y,a=>{p(t)||a(u)})}I(v),X((a,E,d,f,_,M,$,T)=>{C(v,1,`${a??""} rounded-lg border ${E??""} w-[98%] h-10 fixed top-2 left-1/2 translate-x-[-50%] flex items-center gap-2 pl-4 z-50`),C(h,1,`${d??""} max-sm:hidden`),K(s,`#!${oe.SHELL}`),C(c,1,`${f??""} max-sm:hidden`),C(r,1,_),K(m,p(t)||oe.TERM+" v"+oe.VERSION),C(l,1,`${M??""} max-sm:hidden`),C(g,1,`${$??""} max-sm:hidden`),K(b,T)},[()=>x().bg.topBar,()=>x().bg.topBarBorder,()=>x().components.topBarText,()=>x().text.secondary,()=>x().text.secondary,()=>x().text.secondary,()=>x().components.topBarText,()=>p(t)?"Ctrl + C to eXit":"Loaded ["+Object.keys(F).length+"] commands"]),J(e,v),de()}Ge(["click"]);var o=ee(()=>je),w=ee(()=>aa),n=ee(()=>ea),Z=ee(()=>G),ca=z("<button> </button>"),pa=z('<div class="flex gap-0.5 sm:gap-1.5"></div>'),da=z("<div></div>");function ma(e,i){pe(i,!1);let t=q(!1),v=q(!1),h=Q.includes(j.url.pathname.split("/")[2]),s=q();ke(()=>{Y(s,document.getElementById("outputHistory"))});const c=[["Esc","1","2","3","4","5","6","7","8","9","0","-","="],["Tab","q","w","e","r","t","y","u","i","o","p","[","]"],["Shift","a","s","d","f","g","h","j","k","l",";","'","\\"],["Home","End","z","x","c","v","b","n","m",",",".","/"],["Ctrl","‚Üê","‚Üë","‚Üì","‚Üí","Space","Enter","Back","Del"]],r=[["Esc","!","@","#","‚Çπ","%","^","&","*","(",")","_","+"],["Tab","Q","W","E","R","T","Y","U","I","O","P","{","}"],["Shift","A","S","D","F","G","H","J","K","L",":",'"',"|"],["Home","Nether","Z","X","C","V","B","N","M","<",">","?"],["Ctrl","‚Üê","‚Üë","‚Üì","‚Üí","Space","Enter","Back","Del"]];ta();var m=da();$e(m,5,()=>p(t)?r:c,xe,(l,g)=>{var b=pa();$e(b,5,()=>p(g),xe,(y,u)=>{var a=ca(),E=D(a,!0);I(a),X((d,f,_)=>{a.disabled=p(u)=="Ctrl"||p(u)=="c"||p(u)=="C"?!1:p(v),C(a,1,`${p(v)&&!(p(u)=="Ctrl"||p(u)=="c"||p(u)=="C")?"opacity-20 pointer-events-none":"opacity-100"} py-2 px-2.5 sm:px-3 sm:py-2 text-sm sm:text-lg ${d??""} border ${f??""} rounded-lg ${_??""} cursor-pointer`),K(E,p(u))},[()=>x().components.keyboardBg,()=>x().components.keyboardBorder,()=>x().text.primary]),We("click",a,()=>{const d=o().value.trim(),f=d.split(" ");switch(p(u)){case"Back":n().value>0&&(o(o().value=o().value.slice(0,n().value-1)+o().value.slice(n().value)),n(n().value--));break;case"Del":n().value<o().value.length&&o(o().value=o().value.slice(0,n().value)+o().value.slice(n().value+1));break;case"Enter":const _=x(),M=qe();P(s,p(s).innerHTML+=`<pre class="${_.text.primary} break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base">${M} ${d}</pre>`),d&&(N.value.push(d),N.value.length>Qe&&N.value.shift(),localStorage.setItem("MESh_commandHistory",JSON.stringify(N.value))),w(w().value=-1);let $;f[0].startsWith("./")&&(Q.includes(f[0].slice(2))?(Z(Z().value=!1),fe(f[0].slice(2)),$=`MESh: launching program <span class="${_.text.warning} font-semibold">${f[0].slice(2)}</span>`):$=`MESh: program not found: <span class="${_.text.error} font-semibold">${f[0].slice(2)}</span>`),f[0]in F?$=F[f[0]].cmd(f.slice(1)):$=`MESh: command not found: <span class="${_.text.error} font-semibold">${f}</span>`,f[0]!="clear"&&f[0]!=""&&f[0]!="cd"&&P(s,p(s).innerHTML+=`<pre class="break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base"> &gt&gt ${$}</pre>`),o(o().value=""),n(n().value=0);break;case"‚Üê":n().value>0&&n(n().value--);break;case"‚Üí":n().value<o().value.length&&n(n().value++);break;case"‚Üë":N.value.length>0&&(w().value===-1?w(w().value=N.value.length-1):w().value>0&&w(w().value--),o(o().value=N.value[w().value]),n(n().value=o().value.length));break;case"‚Üì":N.value.length>0&&w().value!==-1&&(w().value<N.value.length-1?(w(w().value++),o(o().value=N.value[w().value])):(w(w().value=-1),o(o().value="")),n(n().value=o().value.length));break;case"Home":n(n().value=0);break;case"Nether":case"End":n(n().value=o().value.length);break;case"Esc":o(o().value=""),n(n().value=0);break;case"Tab":if(f.length==1)if(d){const T=Object.keys(F).filter(S=>S.startsWith(d));T.length===1?(o(o().value=T[0]+" "),n(n().value=o().value.length)):T.length>1?P(s,p(s).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono] text-xs sm:text-base break-all whitespace-pre-wrap">Suggestions: ${T.join(", ")}</pre>`):P(s,p(s).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono] text-xs sm:text-base break-all whitespace-pre-wrap">No suggestions found for "${d}"</pre>`)}else P(s,p(s).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono] text-xs sm:text-base break-all whitespace-pre-wrap">Type 'help' for a list of commands</pre>`);break;case"Space":o(o().value=o().value.slice(0,n().value)+" "+o().value.slice(n().value)),n(n().value++);break;case"Shift":Y(t,!p(t));break;case"Ctrl":Y(v,!p(v));break;case"c":case"C":if(p(v))if(h){Z(Z().value=!1),fe("/mesh-terminal/");break}else{P(s,p(s).innerHTML+=`<pre class="break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base"> &gt&gt ${F.exit.cmd([])}</pre>`),o(o().value=""),n(n().value=0),Y(v,!1);break}default:p(u).length==1&&(o(o().value=o().value.slice(0,n().value)+p(u)+o().value.slice(n().value)),n(n().value++));break}}),J(y,a)}),I(b),J(l,b)}),I(m),X(()=>C(m,1,`z-50 flex flex-col gap-1.5 pt-4 -translate-x-4 ${h?"fixed overflow-x-auto bottom-4 max-md:w-screen max-md:left-0 max-md:mb-16 md:left-[50%] md:translate-x-[-50%]":"max-sm:mb-10"}`)),J(e,m),de()}var ga=z(`<div class="fixed bottom-5 right-5 text-yellow-400 text-sm z-10 p-2 bg-neutral-800/90">Press 'Ctrl + C'<br/>or Go Up 1 page<br/>to eXit program</div>`),ba=z('<!> <!> <!> <!> <audio preload="auto"></audio>',1);function Ca(e,i){pe(i,!0);let t,v=we(()=>`font-[Jetbrains_Mono] ${_e.value.bg.primary} ${_e.value.text.primary} m-5 mt-14`);ke(()=>{document.body.className=p(v)}),he(()=>{document.body.className=p(v)});function h(u){u.key=="c"&&u.ctrlKey&&(G.value=!1,fe("/mesh-terminal/"))}sa(()=>{Q.includes(j.url.pathname.split("/")[2])&&window.addEventListener("keydown",h)}),he(()=>{t&&(U.value?t.play().catch(u=>console.error("Radio playback failed:",u)):t.pause())});var s=ba(),c=Ye(s);va(c,{});var r=H(c,2);Ce(r,()=>i.children);var m=H(r,2);{var l=u=>{ma(u,{})};ue(m,u=>{G.value&&u(l)})}var g=H(m,2);{var b=u=>{var a=ga();J(u,a)};ue(g,u=>{Q.includes(j.url.pathname.split("/")[2])&&u(b)})}var y=H(g,2);Ze(y,u=>t=u,()=>t),X(()=>Me(y,"src",ra)),J(e,s),de()}export{Ca as component};
