import"../chunks/Bzak7iHL.js";import"../chunks/BvcyTcfG.js";import{o as X}from"../chunks/wXLI8w2A.js";import{t as z,h as M,a as N,P as G,Q as ee,R as O,T as V,U as A,V as ae,W as te,X as R,c as I,Y as se,Z as $,_ as re,b as le,$ as ne,d as B,M as oe,i as ie,k as ue,O as ve,m as w,x as b,o as f,p as F,I as ce,a0 as pe,n as x,u as K,l as P}from"../chunks/CLgYDTrq.js";import{b as W}from"../chunks/etNz91Zm.js";import{i as fe}from"../chunks/BauU7rzF.js";import{r as H,g as L,c as J,a as j,H as me,p as de,b as he,d as ge,e as be,t as _e,f as ye}from"../chunks/BlEeSApH.js";import{g as ke}from"../chunks/DyhIogiU.js";function C(_,y,s=!1,c=!1,h=!1){var n=_,v="";z(()=>{var g=G;if(v===(v=y()??"")){M&&N();return}if(g.nodes!==null&&(ee(g.nodes.start,g.nodes.end),g.nodes=null),v!==""){if(M){O.data;for(var o=N(),d=o;o!==null&&(o.nodeType!==V||o.data!=="");)d=o,o=A(o);if(o===null)throw ae(),te;R(O,d),n=I(o);return}var m=v+"";s?m=`<svg>${m}</svg>`:c&&(m=`<math>${m}</math>`);var p=se(m);if((s||c)&&(p=$(p)),R($(p),p.lastChild),s||c)for(;$(p);)n.before($(p));else n.before(p)}})}function we(_,y){let s=null,c=M;var h;if(M){s=O;for(var n=$(document.head);n!==null&&(n.nodeType!==V||n.data!==_);)n=A(n);if(n===null)B(!1);else{var v=A(n);n.remove(),I(v)}}M||(h=document.head.appendChild(re()));try{le(()=>y(h),ne)}finally{c&&(B(!0),I(s))}}var a=H(()=>he),r=H(()=>ye),l=H(()=>be),e=H(()=>ge),U=H(()=>_e),xe=ie('<div class="input"><div id="outputHistory"><pre class="break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base"><!></pre></div> <span id="prompt"><!></span> <span class="cmd-input break-all text-gray-200 text-xs sm:text-base"><!></span></div>');function Ce(_,y){oe(y,!1);let s=F(),c=F();X(()=>{const t=localStorage.getItem("MESh_commandHistory");if(t)try{r(r().value=JSON.parse(t))}catch(i){console.error(i),r(r().value=[])}else r(r().value=[]);window.addEventListener("keydown",h)});function h(t){t.preventDefault(),n();const i=a().value.trim(),u=i.split(" ");if(t.key=="c"&&t.ctrlKey){b(s,f(s).innerHTML+=`<pre class="break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base"> &gt&gt ${v("exit")}</pre>`),a(a().value=""),e(e().value=0);return}switch(t.key){case"Backspace":e().value>0&&(a(a().value=a().value.slice(0,e().value-1)+a().value.slice(e().value)),e(e().value--));break;case"Delete":e().value<a().value.length&&a(a().value=a().value.slice(0,e().value)+a().value.slice(e().value+1));break;case"Enter":const k=j();b(s,f(s).innerHTML+=`<pre class="text-gray-200 break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base">${k} ${i}</pre>`),i&&(r().value.push(i),r().value.length>me&&r().value.shift(),localStorage.setItem("MESh_commandHistory",JSON.stringify(r().value))),l(l().value=-1);const q=v(u[0],u.slice(1));u[0]!="clear"&&u[0]!=""&&u[0]!="cd"&&b(s,f(s).innerHTML+=`<pre class="break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base"> &gt&gt ${q}</pre>`),a(a().value=""),e(e().value=0);break;case"ArrowLeft":e().value>0&&e(e().value--);break;case"ArrowRight":e().value<a().value.length&&e(e().value++);break;case"ArrowUp":r().value.length>0&&(l().value==-1?l(l().value=r().value.length-1):l().value>0&&l(l().value--),a(a().value=r().value[l().value]),e(e().value=a().value.length));break;case"ArrowDown":r().value.length>0&&l().value!==-1&&(l().value<r().value.length-1?(l(l().value++),a(a().value=r().value[l().value])):(l(l().value=-1),a(a().value="")),e(e().value=a().value.length));break;case"Home":e(e().value=0);break;case"End":e(e().value=a().value.length);break;case"Escape":a(a().value=""),e(e().value=0);break;case"Tab":if(u.length==1){const S=L();if(i){const E=Object.keys(J).filter(Q=>Q.startsWith(i));E.length==1?(a(a().value=E[0]+" "),e(e().value=a().value.length)):E.length>1?b(s,f(s).innerHTML+=`<pre class="${S.text.secondary} break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base">Suggestions: ${E.join(", ")}</pre>`):b(s,f(s).innerHTML+=`<pre class="${S.text.secondary} break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base">No suggestions found for "${i}"</pre>`)}else b(s,f(s).innerHTML+=`<pre class="${S.text.secondary} break-all whitespace-pre-wrap font-[Jetbrains_Mono] text-xs sm:text-base">Type 'help' for a list of commands</pre>`)}break;default:t.key.length==1&&(a(a().value=a().value.slice(0,e().value)+t.key+a().value.slice(e().value)),e(e().value++));break}}function n(){requestAnimationFrame(()=>{var t;(t=f(c))==null||t.scrollIntoView({behavior:"smooth",block:"end"})})}function v(t,i=[]){const u=L();return t.startsWith("./")?de.includes(t.slice(2))?(window.removeEventListener("keydown",h),U(U().value=!1),ke(t.slice(2)),`MESh: launching program <span class="${u.text.warning} font-semibold">${t.slice(2)}</span>`):`MESh: program not found: <span class="${u.text.error} font-semibold">${t.slice(2)}</span>`:t in J?J[t].cmd(i):`MESh: command not found: <span class="${u.text.error} font-semibold">${t}</span>`}function g(t,i){const u=L(),k=Math.max(0,Math.min(i,t.length));return i==t.length?t+`<span class="${u.bg.cursor} text-black animate-[pulse_1s_ease_infinite]">&nbsp</span>`:t.slice(0,k)+`<span class="${u.bg.cursor} text-black animate-[pulse_1s_ease_infinite]">${t[k]}</span>`+t.slice(k+1)}fe();var o=xe();we("1uha8ag",t=>{ce(()=>{pe.title="MESh - v0.0.2"})});var d=w(o),m=w(d),p=w(m);C(p,()=>v("banner")),x(m),x(d),W(d,t=>K(s,t),()=>f(s));var T=P(d,2),Y=w(T);C(Y,j),x(T);var D=P(T,2),Z=w(D);C(Z,()=>g(a().value,e().value)),x(D),x(o),W(o,t=>K(c,t),()=>f(c)),ue(_,o),ve()}export{Ce as component};
