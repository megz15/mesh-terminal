import"../chunks/Bzak7iHL.js";import{o as xe,s as Me}from"../chunks/E4gp2prH.js";import{c as ee,h as I,V as Se,W as ae,a as Ce,b as He,o as p,ap as Ne,r as Ie,H as Be,s as de,d as re,N as q,O as Le,aq as Ae,ar as pe,Y as Re,a1 as ne,a3 as Oe,as as fe,aa as ze,at as me,q as Y,au as De,av as Je,aw as Ke,ax as A,Z as ye,a0 as $e,ay as te,P as Pe,az as Ve,_ as Fe,p as ve,f as z,t as G,g as O,i as ce,j as J,k as B,l as L,m as Z,n as Ee,u as W,w as D,z as qe,aA as We,e as Xe}from"../chunks/vVpLNVti.js";import{i as oe}from"../chunks/Dp3OS4W0.js";import"../chunks/Bgw2Q8tC.js";import{i as Te}from"../chunks/DAsP8pd3.js";import{g as w,c as P,r as F,h as se,t as U,p as Q,f as C,a as Ye,H as Ze,b as Ge,d as Ue,e as Qe,i as ge}from"../chunks/CjmkdfsZ.js";import{p as j}from"../chunks/DMG9BX0e.js";import{g as ie,a as je}from"../chunks/DLLXqAmx.js";function he(e,i){return i}function ea(e,i,t){for(var v=[],h=i.length,s,f=i.length,r=0;r<h;r++){let u=i[r];$e(u,()=>{if(s){if(s.pending.delete(u),s.done.add(u),s.pending.size===0){var _=e.outrogroups;ue(fe(s.done)),_.delete(s),_.size===0&&(e.outrogroups=null)}}else f-=1},!1)}if(f===0){var m=v.length===0&&t!==null;if(m){var l=t,g=l.parentNode;Ve(g),g.append(l),e.items.clear()}ue(i,!m)}else s={pending:new Set(i),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(s)}function ue(e,i=!0){for(var t=0;t<e.length;t++)Fe(e[t],i)}var be;function _e(e,i,t,v,h,s=null){var f=e,r=new Map;{var m=e;f=I?ee(Se(m)):m.appendChild(ae())}I&&Ce();var l=null,g=Ne(()=>{var d=t();return ze(d)?d:d==null?[]:fe(d)}),u,_=!0;function x(){y.fallback=l,aa(y,u,f,i,v),l!==null&&(u.length===0?(l.f&A)===0?ye(l):(l.f^=A,V(l,null,f)):$e(l,()=>{l=null}))}var a=He(()=>{u=p(g);var d=u.length;let c=!1;if(I){var b=Ie(f)===Be;b!==(d===0)&&(f=de(),ee(f),re(!1),c=!0)}for(var M=new Set,$=Re,k=Oe(),S=0;S<d;S+=1){I&&q.nodeType===Le&&q.data===Ae&&(f=q,c=!0,re(!1));var K=u[S],R=v(K,S),E=_?null:r.get(R);E?(E.v&&pe(E.v,K),E.i&&pe(E.i,S),k&&$.skipped_effects.delete(E.e)):(E=ra(r,_?f:be??(be=ae()),K,R,S,h,i,t),_||(E.e.f|=A),r.set(R,E)),M.add(R)}if(d===0&&s&&!l&&(_?l=ne(()=>s(f)):(l=ne(()=>s(be??(be=ae()))),l.f|=A)),I&&d>0&&ee(de()),!_)if(k){for(const[ke,we]of r)M.has(ke)||$.skipped_effects.add(we.e);$.oncommit(x),$.ondiscard(()=>{})}else x();c&&re(!0),p(g)}),y={effect:a,items:r,outrogroups:null,fallback:l};_=!1,I&&(f=q)}function aa(e,i,t,v,h){var R;var s=i.length,f=e.items,r=e.effect.first,m,l=null,g=[],u=[],_,x,a,y;for(y=0;y<s;y+=1){if(_=i[y],x=h(_,y),a=f.get(x).e,e.outrogroups!==null)for(const E of e.outrogroups)E.pending.delete(a),E.done.delete(a);if((a.f&A)!==0)if(a.f^=A,a===r)V(a,null,t);else{var d=l?l.next:r;a===e.effect.last&&(e.effect.last=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),N(e,l,a),N(e,a,d),V(a,d,t),l=a,g=[],u=[],r=l.next;continue}if((a.f&te)!==0&&ye(a),a!==r){if(m!==void 0&&m.has(a)){if(g.length<u.length){var c=u[0],b;l=c.prev;var M=g[0],$=g[g.length-1];for(b=0;b<g.length;b+=1)V(g[b],c,t);for(b=0;b<u.length;b+=1)m.delete(u[b]);N(e,M.prev,$.next),N(e,l,M),N(e,$,c),r=c,l=$,y-=1,g=[],u=[]}else m.delete(a),V(a,r,t),N(e,a.prev,a.next),N(e,a,l===null?e.effect.first:l.next),N(e,l,a),l=a;continue}for(g=[],u=[];r!==null&&r!==a;)(m??(m=new Set)).add(r),u.push(r),r=r.next;if(r===null)continue}(a.f&A)===0&&g.push(a),l=a,r=a.next}if(e.outrogroups!==null){for(const E of e.outrogroups)E.pending.size===0&&(ue(fe(E.done)),(R=e.outrogroups)==null||R.delete(E));e.outrogroups.size===0&&(e.outrogroups=null)}if(r!==null||m!==void 0){var k=[];if(m!==void 0)for(a of m)(a.f&te)===0&&k.push(a);for(;r!==null;)(r.f&te)===0&&r!==e.fallback&&k.push(r),r=r.next;var S=k.length;if(S>0){var K=s===0?t:null;ea(e,k,K)}}}function ra(e,i,t,v,h,s,f,r){var m=(f&Je)!==0?(f&Ke)===0?Y(t,!1,!1):me(t):null,l=(f&De)!==0?me(h):null;return{v:m,i:l,e:ne(()=>(s(i,m??t,l??h,r),()=>{e.delete(v)}))}}function V(e,i,t){if(e.nodes)for(var v=e.nodes.start,h=e.nodes.end,s=i&&(i.f&A)===0?i.nodes.start:t;v!==null;){var f=Pe(v);if(s.before(v),v===h)return;v=f}}function N(e,i,t){i===null?e.effect.first=t:i.next=t,t===null?e.effect.last=i:t.prev=i}function ta(e,i,t){var v=e==null?"":""+e;return v===""?null:v}function H(e,i,t,v,h,s){var f=e.__className;if(I||f!==t||f===void 0){var r=ta(t);(!I||r!==e.getAttribute("class"))&&(r==null?e.removeAttribute("class"):e.className=r),e.__className=t}return s}var le=F(()=>U),sa=z('<div class="ml-auto pr-4"><button type="button">Toggle Keyboard</button></div>'),la=z('<div id="top-bar"><span> </span> <span>|</span> <span> </span> <span>|</span> <span> </span> <!></div>');function na(e,i){ve(i,!1);let t=j.url.pathname.split("/")[2];Te();var v=la(),h=J(v),s=J(h);B(h);var f=L(h,2),r=L(f,2),m=J(r,!0);B(r);var l=L(r,2),g=L(l,2),u=J(g,!0);B(g);var _=L(g,2);{var x=a=>{var y=sa(),d=J(y);B(y),G((c,b,M)=>H(d,1,`px-3 py-1.5 text-xs rounded-md ${c??""} ${b??""} border ${M??""} cursor-pointer`),[()=>w().components.keyboardBg,()=>w().components.keyboardBorder,()=>w().text.primary]),Ee("click",d,()=>le(le().value=!le().value)),O(a,y)};oe(_,a=>{t||a(x)})}B(v),G((a,y,d,c,b,M,$,k)=>{H(v,1,`${a??""} rounded-lg border ${y??""} w-[98%] h-10 fixed top-2 left-1/2 translate-x-[-50%] flex items-center gap-2 pl-4 z-50`),H(h,1,`${d??""} max-sm:hidden`),Z(s,`#!${se.SHELL}`),H(f,1,`${c??""} max-sm:hidden`),H(r,1,b),Z(m,t||se.TERM+" v"+se.VERSION),H(l,1,`${M??""} max-sm:hidden`),H(g,1,`${$??""} max-sm:hidden`),Z(u,k)},[()=>w().bg.topBar,()=>w().bg.topBarBorder,()=>w().components.topBarText,()=>w().text.secondary,()=>w().text.secondary,()=>w().text.secondary,()=>w().components.topBarText,()=>t?"Ctrl + C to eXit":"Loaded ["+Object.keys(P).length+"] commands"]),O(e,v),ce()}var o=F(()=>Ge),T=F(()=>Qe),n=F(()=>Ue),X=F(()=>U),oa=z("<button> </button>"),ia=z('<div class="flex gap-1.5"></div>'),ua=z("<div></div>");function fa(e,i){ve(i,!1);let t=Y(!1),v=Y(!1),h=Q.includes(j.url.pathname.split("/")[2]),s=Y();xe(()=>{W(s,document.getElementById("outputHistory"))});const f=[["Esc","1","2","3","4","5","6","7","8","9","0","-","="],["Tab","q","w","e","r","t","y","u","i","o","p","[","]"],["Shift","a","s","d","f","g","h","j","k","l",";","'","\\"],["Home","End","z","x","c","v","b","n","m",",",".","/"],["Ctrl","←","↑","↓","→","Space","Enter","Back","Del"]],r=[["Esc","!","@","#","₹","%","^","&","*","(",")","_","+"],["Tab","Q","W","E","R","T","Y","U","I","O","P","{","}"],["Shift","A","S","D","F","G","H","J","K","L",":",'"',"|"],["Home","Nether","Z","X","C","V","B","N","M","<",">","?"],["Ctrl","←","↑","↓","→","Space","Enter","Back","Del"]];Te();var m=ua();_e(m,5,()=>p(t)?r:f,he,(l,g)=>{var u=ia();_e(u,5,()=>p(g),he,(_,x)=>{var a=oa(),y=J(a,!0);B(a),G((d,c,b)=>{a.disabled=p(x)=="Ctrl"||p(x)=="c"||p(x)=="C"?!1:p(v),H(a,1,`${p(v)&&!(p(x)=="Ctrl"||p(x)=="c"||p(x)=="C")?"opacity-20 pointer-events-none":"opacity-100"} px-3 py-2 text-lg ${d??""} border ${c??""} rounded-lg ${b??""} cursor-pointer`),Z(y,p(x))},[()=>w().components.keyboardBg,()=>w().components.keyboardBorder,()=>w().text.primary]),Ee("click",a,()=>{const d=o().value.trim(),c=d.split(" ");switch(p(x)){case"Back":n().value>0&&(o(o().value=o().value.slice(0,n().value-1)+o().value.slice(n().value)),n(n().value--));break;case"Del":n().value<o().value.length&&o(o().value=o().value.slice(0,n().value)+o().value.slice(n().value+1));break;case"Enter":const b=w(),M=Ye();D(s,p(s).innerHTML+=`<pre class="${b.text.primary} font-[Jetbrains_Mono]">${M} ${d}</pre>`),d&&(C.value.push(d),C.value.length>Ze&&C.value.shift(),localStorage.setItem("MESh_commandHistory",JSON.stringify(C.value))),T(T().value=-1);let $;c[0].startsWith("./")&&(Q.includes(c[0].slice(2))?(X(X().value=!1),ie(c[0].slice(2)),$=`MESh: launching program <span class="${b.text.warning} font-semibold">${c[0].slice(2)}</span>`):$=`MESh: program not found: <span class="${b.text.error} font-semibold">${c[0].slice(2)}</span>`),c[0]in P?$=P[c[0]].cmd(c.slice(1)):$=`MESh: command not found: <span class="${b.text.error} font-semibold">${c}</span>`,c[0]!="clear"&&c[0]!=""&&c[0]!="cd"&&D(s,p(s).innerHTML+=`<pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"> &gt&gt ${$}</pre>`),o(o().value=""),n(n().value=0);break;case"←":n().value>0&&n(n().value--);break;case"→":n().value<o().value.length&&n(n().value++);break;case"↑":C.value.length>0&&(T().value===-1?T(T().value=C.value.length-1):T().value>0&&T(T().value--),o(o().value=C.value[T().value]),n(n().value=o().value.length));break;case"↓":C.value.length>0&&T().value!==-1&&(T().value<C.value.length-1?(T(T().value++),o(o().value=C.value[T().value])):(T(T().value=-1),o(o().value="")),n(n().value=o().value.length));break;case"Home":n(n().value=0);break;case"Nether":case"End":n(n().value=o().value.length);break;case"Esc":o(o().value=""),n(n().value=0);break;case"Tab":if(c.length==1)if(d){const k=Object.keys(P).filter(S=>S.startsWith(d));k.length===1?(o(o().value=k[0]+" "),n(n().value=o().value.length)):k.length>1?D(s,p(s).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">Suggestions: ${k.join(", ")}</pre>`):D(s,p(s).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">No suggestions found for "${d}"</pre>`)}else D(s,p(s).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">Type 'help' for a list of commands</pre>`);break;case"Space":o(o().value=o().value.slice(0,n().value)+" "+o().value.slice(n().value)),n(n().value++);break;case"Shift":W(t,!p(t));break;case"Ctrl":W(v,!p(v));break;case"c":case"C":if(p(v))if(h){X(X().value=!1),ie("/mesh-terminal/");break}else{D(s,p(s).innerHTML+=`<pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"> &gt&gt ${P.exit.cmd([])}</pre>`),o(o().value=""),n(n().value=0),W(v,!1);break}default:p(x).length==1&&(o(o().value=o().value.slice(0,n().value)+p(x)+o().value.slice(n().value)),n(n().value++));break}}),O(_,a)}),B(u),O(l,u)}),B(m),G(()=>H(m,1,`z-50 flex flex-col gap-1.5 pt-4 ${h?"fixed overflow-x-auto bottom-4 max-md:w-screen max-md:left-0 max-md:mb-16 md:left-[50%] md:translate-x-[-50%]":"max-sm:mb-10"}`)),O(e,m),ce()}var va=z(`<div class="fixed bottom-5 right-5 text-yellow-400 text-sm z-10">Press 'Ctrl + C'<br/>or Go Back 1 pg<br/>to eXit program</div>`),ca=z("<!> <!> <!> <!>",1);function $a(e,i){ve(i,!0);let t=We(()=>`font-[Jetbrains_Mono] ${ge.value.bg.primary} ${ge.value.text.primary} m-5 mt-14`);xe(()=>{document.body.className=p(t)}),qe(()=>{document.body.className=p(t)});function v(u){u.key=="c"&&u.ctrlKey&&(U.value=!1,ie("/mesh-terminal/"))}je(()=>{Q.includes(j.url.pathname.split("/")[2])&&window.addEventListener("keydown",v)});var h=ca(),s=Xe(h);na(s,{});var f=L(s,2);Me(f,()=>i.children);var r=L(f,2);{var m=u=>{fa(u,{})};oe(r,u=>{U.value&&u(m)})}var l=L(r,2);{var g=u=>{var _=va();O(u,_)};oe(l,u=>{Q.includes(j.url.pathname.split("/")[2])&&u(g)})}O(e,h),ce()}export{$a as component};
