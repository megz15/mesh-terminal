import{a as L,c as U,f as V,h as W,b as Y}from"../chunks/P49aM0Xt.js";import{i as Z}from"../chunks/BgqkNlm-.js";import{t as K,h as x,a as D,l as Q,m as X,i as O,n as ee,o as ae,v as se,s as te,w as k,x as re,y as le,z as ne,A as w,B as p,C as R,$ as oe,D as g,u as S,F as b,G as B,I as E,J as N}from"../chunks/CCO0EpHD.js";import{b as j}from"../chunks/CPez_SJs.js";import{r as $,c as J,g as T,H as ie,a as ue,b as ve,d as ce,e as fe}from"../chunks/BhzoYDOK.js";function A(H,M,l=!1,c=!1,C=!1){var m=H,d="";K(()=>{var v=Q;if(d===(d=M()??"")){x&&D();return}if(v.nodes_start!==null&&(X(v.nodes_start,v.nodes_end),v.nodes_start=v.nodes_end=null),d!==""){if(x){O.data;for(var n=D(),_=n;n!==null&&(n.nodeType!==8||n.data!=="");)_=n,n=ee(n);if(n===null)throw ae(),se;L(O,_),m=te(n);return}var f=d+"";l?f=`<svg>${f}</svg>`:c&&(f=`<math>${f}</math>`);var o=U(f);if((l||c)&&(o=k(o)),L(k(o),o.lastChild),l||c)for(;k(o);)m.before(k(o));else m.before(o)}})}var a=$(()=>ue),t=$(()=>fe),r=$(()=>ce),e=$(()=>ve),pe=V('<div class="input"><div id="outputHistory"><pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"><!></pre></div> <span id="prompt"><!></span> <span class="cmd-input sm:break-all text-gray-200"><!></span></div>');function be(H,M){re(M,!1);let l=R(),c=R();le(()=>{const s=localStorage.getItem("MESh_commandHistory");if(s)try{t(t().value=JSON.parse(s))}catch(i){console.error(i),t(t().value=[])}else t(t().value=[]);window.onload=()=>{window.addEventListener("keydown",i=>{i.preventDefault(),C();const u=a().value.trim(),h=u.split(" ");switch(i.key){case"Backspace":e().value>0&&(a(a().value=a().value.slice(0,e().value-1)+a().value.slice(e().value)),e(e().value--));break;case"Delete":e().value<a().value.length&&a(a().value=a().value.slice(0,e().value)+a().value.slice(e().value+1));break;case"Enter":const q=T();w(l,p(l).innerHTML+=`<pre class="text-gray-200 font-[Jetbrains_Mono]">${q} ${u}</pre>`),u&&(t().value.push(u),t().value.length>ie&&t().value.shift(),localStorage.setItem("MESh_commandHistory",JSON.stringify(t().value))),r(r().value=-1);const z=m(h[0],h.slice(1));h[0]!="clear"&&h[0]!=""&&h[0]!="cd"&&w(l,p(l).innerHTML+=`<pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"> &gt&gt ${z}</pre>`),a(a().value=""),e(e().value=0);break;case"ArrowLeft":e().value>0&&e(e().value--);break;case"ArrowRight":e().value<a().value.length&&e(e().value++);break;case"ArrowUp":t().value.length>0&&(r().value===-1?r(r().value=t().value.length-1):r().value>0&&r(r().value--),a(a().value=t().value[r().value]),e(e().value=a().value.length));break;case"ArrowDown":t().value.length>0&&r().value!==-1&&(r().value<t().value.length-1?(r(r().value++),a(a().value=t().value[r().value])):(r(r().value=-1),a(a().value="")),e(e().value=a().value.length));break;case"Home":e(e().value=0);break;case"End":e(e().value=a().value.length);break;case"Escape":a(a().value=""),e(e().value=0);break;case"Tab":if(h.length==1&&u){const y=Object.keys(J).filter(G=>G.startsWith(u));y.length===1?(a(a().value=y[0]+" "),e(e().value=a().value.length)):y.length>1?w(l,p(l).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">Suggestions: ${y.join(", ")}</pre>`):w(l,p(l).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">No suggestions found for "${u}"</pre>`)}break;default:i.key.length==1&&(a(a().value=a().value.slice(0,e().value)+i.key+a().value.slice(e().value)),e(e().value++));break}})}});function C(){requestAnimationFrame(()=>{var s;(s=p(c))==null||s.scrollIntoView({behavior:"smooth",block:"end"})})}function m(s,i=[]){return s in J?J[s].cmd(i):`MESh: command not found: <span class="text-red-400 font-semibold">${s}</span>`}function d(s,i){const u=Math.max(0,Math.min(i,s.length));return i===s.length?s+'<span class="bg-gray-300 text-black animate-[pulse_1s_ease_infinite]">&nbsp</span>':s.slice(0,u)+`<span class="bg-gray-300 text-black animate-[pulse_1s_ease_infinite]">${s[u]}</span>`+s.slice(u+1)}Z();var v=pe();W(s=>{oe.title="MESh - v0.0.1"});var n=g(v),_=g(n),f=g(_);A(f,()=>S(()=>m("banner"))),b(_),b(n),j(n,s=>N(l,s),()=>p(l));var o=B(n,2),F=g(o);A(F,()=>(E(T),S(T))),b(o);var I=B(o,2),P=g(I);A(P,()=>(E(a()),E(e()),S(()=>d(a().value,e().value)))),b(I),b(v),j(v,s=>N(c,s),()=>p(c)),Y(H,v),ne()}export{be as component};
