import"../chunks/Bzak7iHL.js";import{c as U,h as N,V as ye,W as Q,a as Te,b as ke,o as d,ap as we,r as Se,H as Me,s as fe,d as j,N as q,O as He,aq as Ce,ar as ve,Y as Ne,a1 as le,a3 as $e,as as ie,aa as Ie,at as ce,q as Y,au as Le,av as Ae,aw as Re,ax as $,Z as he,a0 as be,ay as ee,P as Oe,az as ze,_ as De,p as oe,f as R,t as te,g as A,i as ue,j as z,k as I,l as D,m as Z,u as W,n as Be,w as O,aA as Je,e as Ke}from"../chunks/BghsN6o4.js";import{o as Pe,s as Ve}from"../chunks/COIXPI3M.js";import{i as ae}from"../chunks/CUXuMg6K.js";import"../chunks/DlUC6qYm.js";import{i as _e}from"../chunks/jtwxj7k6.js";import{c as J,f as re,p as V,r as G,e as S,g as Fe,H as qe,a as We,b as Xe,t as K,d as Ye}from"../chunks/Cf0lM_30.js";import{p as F}from"../chunks/BouM13iZ.js";import{g as se,a as Ze}from"../chunks/Dt1TNIDv.js";function de(e,o){return o}function Ge(e,o,l){for(var f=[],h=o.length,t,u=o.length,r=0;r<h;r++){let p=o[r];be(p,()=>{if(t){if(t.pending.delete(p),t.done.add(p),t.pending.size===0){var _=e.outrogroups;ne(ie(t.done)),_.delete(t),_.size===0&&(e.outrogroups=null)}}else u-=1},!1)}if(u===0){var c=f.length===0&&l!==null;if(c){var s=l,g=s.parentNode;ze(g),g.append(s),e.items.clear()}ne(o,!c)}else t={pending:new Set(o),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(t)}function ne(e,o=!0){for(var l=0;l<e.length;l++)De(e[l],o)}var pe;function ge(e,o,l,f,h,t=null){var u=e,r=new Map;{var c=e;u=N?U(ye(c)):c.appendChild(Q())}N&&Te();var s=null,g=we(()=>{var b=l();return Ie(b)?b:b==null?[]:ie(b)}),p,_=!0;function v(){k.fallback=s,Ue(k,p,u,o,f),s!==null&&(p.length===0?(s.f&$)===0?he(s):(s.f^=$,P(s,null,u)):be(s,()=>{s=null}))}var a=ke(()=>{p=d(g);var b=p.length;let m=!1;if(N){var T=Se(u)===Me;T!==(b===0)&&(u=fe(),U(u),j(!1),m=!0)}for(var w=new Set,y=Ne,M=$e(),H=0;H<b;H+=1){N&&q.nodeType===He&&q.data===Ce&&(u=q,m=!0,j(!1));var B=p[H],L=f(B,H),x=_?null:r.get(L);x?(x.v&&ve(x.v,B),x.i&&ve(x.i,H),M&&y.skipped_effects.delete(x.e)):(x=Qe(r,_?u:pe??(pe=Q()),B,L,H,h,o,l),_||(x.e.f|=$),r.set(L,x)),w.add(L)}if(b===0&&t&&!s&&(_?s=le(()=>t(u)):(s=le(()=>t(pe??(pe=Q()))),s.f|=$)),N&&b>0&&U(fe()),!_)if(M){for(const[xe,Ee]of r)w.has(xe)||y.skipped_effects.add(Ee.e);y.oncommit(v),y.ondiscard(()=>{})}else v();m&&j(!0),d(g)}),k={effect:a,items:r,outrogroups:null,fallback:s};_=!1,N&&(u=q)}function Ue(e,o,l,f,h){var L;var t=o.length,u=e.items,r=e.effect.first,c,s=null,g=[],p=[],_,v,a,k;for(k=0;k<t;k+=1){if(_=o[k],v=h(_,k),a=u.get(v).e,e.outrogroups!==null)for(const x of e.outrogroups)x.pending.delete(a),x.done.delete(a);if((a.f&$)!==0)if(a.f^=$,a===r)P(a,null,l);else{var b=s?s.next:r;a===e.effect.last&&(e.effect.last=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),C(e,s,a),C(e,a,b),P(a,b,l),s=a,g=[],p=[],r=s.next;continue}if((a.f&ee)!==0&&he(a),a!==r){if(c!==void 0&&c.has(a)){if(g.length<p.length){var m=p[0],T;s=m.prev;var w=g[0],y=g[g.length-1];for(T=0;T<g.length;T+=1)P(g[T],m,l);for(T=0;T<p.length;T+=1)c.delete(p[T]);C(e,w.prev,y.next),C(e,s,w),C(e,y,m),r=m,s=y,k-=1,g=[],p=[]}else c.delete(a),P(a,r,l),C(e,a.prev,a.next),C(e,a,s===null?e.effect.first:s.next),C(e,s,a),s=a;continue}for(g=[],p=[];r!==null&&r!==a;)(c??(c=new Set)).add(r),p.push(r),r=r.next;if(r===null)continue}(a.f&$)===0&&g.push(a),s=a,r=a.next}if(e.outrogroups!==null){for(const x of e.outrogroups)x.pending.size===0&&(ne(ie(x.done)),(L=e.outrogroups)==null||L.delete(x));e.outrogroups.size===0&&(e.outrogroups=null)}if(r!==null||c!==void 0){var M=[];if(c!==void 0)for(a of c)(a.f&ee)===0&&M.push(a);for(;r!==null;)(r.f&ee)===0&&r!==e.fallback&&M.push(r),r=r.next;var H=M.length;if(H>0){var B=t===0?l:null;Ge(e,M,B)}}}function Qe(e,o,l,f,h,t,u,r){var c=(u&Ae)!==0?(u&Re)===0?Y(l,!1,!1):ce(l):null,s=(u&Le)!==0?ce(h):null;return{v:c,i:s,e:le(()=>(t(o,c??l,s??h,r),()=>{e.delete(f)}))}}function P(e,o,l){if(e.nodes)for(var f=e.nodes.start,h=e.nodes.end,t=o&&(o.f&$)===0?o.nodes.start:l;f!==null;){var u=Oe(f);if(t.before(f),f===h)return;f=u}}function C(e,o,l){o===null?e.effect.first=l:o.next=l,l===null?e.effect.last=o:l.prev=o}function je(e,o,l){var f=e==null?"":""+e;return f===""?null:f}function me(e,o,l,f,h,t){var u=e.__className;if(N||u!==l||u===void 0){var r=je(l);(!N||r!==e.getAttribute("class"))&&(r==null?e.removeAttribute("class"):e.className=r),e.__className=l}return t}var ea=R('<div id="top-bar" class="bg-neutral-950 rounded-lg border border-gray-500 w-[98%] h-10 fixed top-2 left-1/2 translate-x-[-50%] flex items-center gap-2 pl-4 z-50"><span class="text-gray-500"> </span> <span class="text-gray-400">|</span> <span class="text-gray-400"> </span> <span class="text-gray-400 max-sm:hidden">|</span> <span class="text-gray-500 max-sm:hidden"> </span></div>');function aa(e,o){oe(o,!1);let l=F.url.pathname.split("/")[2];_e();var f=ea(),h=z(f),t=z(h);I(h);var u=D(h,4),r=z(u,!0);I(u);var c=D(u,4),s=z(c,!0);I(c),I(f),te(g=>{Z(t,`#!${re.SHELL}`),Z(r,l||re.TERM+" v"+re.VERSION),Z(s,g)},[()=>l?"Ctrl + C to eXit":"Loaded ["+Object.keys(J).length+"] commands"]),A(e,f),ue()}var i=G(()=>We),E=G(()=>Ye),n=G(()=>Xe),X=G(()=>K),ra=R("<button> </button>"),la=R('<div class="flex gap-1.5"></div>'),ta=R("<div></div>");function sa(e,o){oe(o,!1);let l=Y(!1),f=Y(!1),h=V.includes(F.url.pathname.split("/")[2]),t=Y();Pe(()=>{W(t,document.getElementById("outputHistory"))});const u=[["Esc","1","2","3","4","5","6","7","8","9","0","-","="],["Tab","q","w","e","r","t","y","u","i","o","p","[","]"],["Shift","a","s","d","f","g","h","j","k","l",";","'","\\"],["Home","End","z","x","c","v","b","n","m",",",".","/"],["Ctrl","←","↑","↓","→","Space","Enter","Back","Del"]],r=[["Esc","!","@","#","₹","%","^","&","*","(",")","_","+"],["Tab","Q","W","E","R","T","Y","U","I","O","P","{","}"],["Shift","A","S","D","F","G","H","J","K","L",":",'"',"|"],["Home","Nether","Z","X","C","V","B","N","M","<",">","?"],["Ctrl","←","↑","↓","→","Space","Enter","Back","Del"]];_e();var c=ta();ge(c,5,()=>d(l)?r:u,de,(s,g)=>{var p=la();ge(p,5,()=>d(g),de,(_,v)=>{var a=ra(),k=z(a,!0);I(a),te(()=>{a.disabled=d(v)=="Ctrl"||d(v)=="c"||d(v)=="C"?!1:d(f),me(a,1,`${d(f)&&!(d(v)=="Ctrl"||d(v)=="c"||d(v)=="C")?"opacity-20 pointer-events-none":"opacity-100"} px-3 py-2 text-lg bg-neutral-950 border border-gray-400 rounded-lg text-gray-200 cursor-pointer`),Z(k,d(v))}),Be("click",a,()=>{const b=i().value.trim(),m=b.split(" ");switch(d(v)){case"Back":n().value>0&&(i(i().value=i().value.slice(0,n().value-1)+i().value.slice(n().value)),n(n().value--));break;case"Del":n().value<i().value.length&&i(i().value=i().value.slice(0,n().value)+i().value.slice(n().value+1));break;case"Enter":const T=Fe();O(t,d(t).innerHTML+=`<pre class="text-gray-200 font-[Jetbrains_Mono]">${T} ${b}</pre>`),b&&(S.value.push(b),S.value.length>qe&&S.value.shift(),localStorage.setItem("MESh_commandHistory",JSON.stringify(S.value))),E(E().value=-1);let w;m[0].startsWith("./")&&(V.includes(m[0].slice(2))?(X(X().value=!1),se(m[0].slice(2)),w=`MESh: launching program <span class="text-yellow-400 font-semibold">${m[0].slice(2)}</span>`):w=`MESh: program not found: <span class="text-red-400 font-semibold">${m[0].slice(2)}</span>`),m[0]in J?w=J[m[0]].cmd(m.slice(1)):w=`MESh: command not found: <span class="text-red-400 font-semibold">${m}</span>`,m[0]!="clear"&&m[0]!=""&&m[0]!="cd"&&O(t,d(t).innerHTML+=`<pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"> &gt&gt ${w}</pre>`),i(i().value=""),n(n().value=0);break;case"←":n().value>0&&n(n().value--);break;case"→":n().value<i().value.length&&n(n().value++);break;case"↑":S.value.length>0&&(E().value===-1?E(E().value=S.value.length-1):E().value>0&&E(E().value--),i(i().value=S.value[E().value]),n(n().value=i().value.length));break;case"↓":S.value.length>0&&E().value!==-1&&(E().value<S.value.length-1?(E(E().value++),i(i().value=S.value[E().value])):(E(E().value=-1),i(i().value="")),n(n().value=i().value.length));break;case"Home":n(n().value=0);break;case"Nether":case"End":n(n().value=i().value.length);break;case"Esc":i(i().value=""),n(n().value=0);break;case"Tab":if(m.length==1)if(b){const y=Object.keys(J).filter(M=>M.startsWith(b));y.length===1?(i(i().value=y[0]+" "),n(n().value=i().value.length)):y.length>1?O(t,d(t).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">Suggestions: ${y.join(", ")}</pre>`):O(t,d(t).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">No suggestions found for "${b}"</pre>`)}else O(t,d(t).innerHTML+=`<pre class="text-gray-400 font-[Jetbrains_Mono]">Type 'help' for a list of commands</pre>`);break;case"Space":i(i().value=i().value.slice(0,n().value)+" "+i().value.slice(n().value)),n(n().value++);break;case"Shift":W(l,!d(l));break;case"Ctrl":W(f,!d(f));break;case"c":case"C":if(d(f))if(h){X(X().value=!1),se("/mesh-terminal/");break}else{O(t,d(t).innerHTML+=`<pre class="sm:break-all sm:whitespace-pre-wrap font-[Jetbrains_Mono]"> &gt&gt ${J.exit.cmd([])}</pre>`),i(i().value=""),n(n().value=0),W(f,!1);break}default:d(v).length==1&&(i(i().value=i().value.slice(0,n().value)+d(v)+i().value.slice(n().value)),n(n().value++));break}}),A(_,a)}),I(p),A(s,p)}),I(c),te(()=>me(c,1,`z-50 flex flex-col gap-1.5 pt-4 ${h?"fixed overflow-x-auto bottom-4 max-md:w-screen max-md:left-0 max-md:mb-16 md:left-[50%] md:translate-x-[-50%]":"max-sm:mb-10"}`)),A(e,c),ue()}var na=R(`<div class="fixed bottom-5 right-5 text-yellow-400 text-sm z-10">Press 'Ctrl + C'<br/>or Go Back 1 pg<br/>to eXit program</div>`),ia=R('<button class="px-3 py-2 text-sm bg-neutral-950 border border-gray-400 rounded-lg text-gray-200 cursor-pointer fixed bottom-4 right-4">Toggle Keyboard</button>'),oa=R('<!> <!> <!> <!> <div class="flex justify-end"><!></div>',1);function ba(e,o){oe(o,!0);function l(v){v.key=="c"&&v.ctrlKey&&(K.value=!1,se("/mesh-terminal/"))}Ze(()=>{V.includes(F.url.pathname.split("/")[2])&&window.addEventListener("keydown",l)});var f=oa(),h=Ke(f);aa(h,{});var t=D(h,2);Ve(t,()=>o.children);var u=D(t,2);{var r=v=>{sa(v,{})};ae(u,v=>{K.value&&v(r)})}var c=D(u,2);{var s=v=>{var a=na();A(v,a)};ae(c,v=>{V.includes(F.url.pathname.split("/")[2])&&v(s)})}var g=D(c,2),p=z(g);{var _=v=>{var a=ia();a.__click=()=>K.value=!K.value,A(v,a)};ae(p,v=>{V.includes(F.url.pathname.split("/")[2])||v(_)})}I(g),A(e,f),ue()}Je(["click"]);export{ba as component};
